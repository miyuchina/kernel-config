# vim: filetype=sh:

# base options; see https://github.com/gg7/gentoo-kernel-guide

LOCALVERSION="-mi"

# default init
DEFAULT_INIT="/sbin/runit-init"

# default kernel commandline
CMDLINE_BOOL=y
CMDLINE_OVERRIDE=n
CMDLINE="root=/dev/nvme0n1p6 rootfstype=btrfs rootflags=subvol=root"

# /proc/config.gz
IKCONFIG=y
IKCONFIG_PROC=y

# kernel compression
KERNEL_GZIP=n
KERNEL_LZ4=y

# hugepage support
TRANSPARENT_HUGEPAGE=y
TRANSPARENT_HUGEPAGE_ALWAYS=y
TRANSPARENT_HUGEPAGE_MADVISE=n
# read-only transparent hugepage for filesystems
READ_ONLY_THP_FOR_FS=n

# sensors
I2C_CHARDEV=y

# power allocator thermal governor
THERMAL_GOV_POWER_ALLOCATOR=y
THERMAL_DEFAULT_GOV_POWER_ALLOCATOR=y
THERMAL_DEFAULT_GOV_STEP_WISE=n

# large payload keys
BIG_KEYS=n

# kernel optimizations
PREEMPT=y
PREEMPT_VOLUNTARY=n
PREEMPT_TRACER=n
SCHED_AUTOGROUP=y
DEBUG_KERNEL=n
KPROBES=n

# speed up ccache
GCC_PLUGINS=n

# not using initramfs/initrd
BLK_DEV_INITRD=n

# not using raid
RAID6_PQ_BENCHMARK=n

# remove support for non-PC x86 platforms
X86_EXTENDED_PLATFORM=n

# remove AMD support
X86_MCE_AMD=n
MICROCODE_AMD=n
AMD_NUMA=n

# ???
TOUCHSCREEN_SUR40=n
I2C_MUX_LTC4306=n
I2C_MUX_PCA9541=n
I2C_MUX_REG=n
I2C_MUX_MLXCPLD=n
MOST=n
DLM=n
